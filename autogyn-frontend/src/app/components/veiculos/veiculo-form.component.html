<div class="form-container">
  <h2>Cadastro de Veículo</h2>

  <form [formGroup]="veiculoForm" (ngSubmit)="onSubmit()" class="p-fluid formulario-estilizado">

    <div class="p-field" [ngClass]="{ 'invalid-field': isInvalid('placa') }">
      <label for="placa">Placa</label>
      <input
        id="placa"
        type="text"
        pInputText
        formControlName="placa"
        maxlength="7"
        placeholder="ABC1D23"
        (input)="formatarPlaca($event)"
      />
      <div class="campo-erro" *ngIf="isInvalid('placa')">Formato inválido (ex: ABC1D23)</div>
    </div>

    <div class="p-field" [ngClass]="{ 'invalid-field': isInvalid('marca') }">
      <label for="marca">Marca</label>
      <input id="marca" type="text" pInputText formControlName="marca" placeholder="Fiat, Toyota..." />
      <div class="campo-erro" *ngIf="isInvalid('marca')">Apenas letras são permitidas</div>
    </div>

    <div class="p-field" [ngClass]="{ 'invalid-field': isInvalid('modelo') }">
      <label for="modelo">Modelo</label>
      <input id="modelo" type="text" pInputText formControlName="modelo" />
      <div class="campo-erro" *ngIf="isInvalid('modelo')">Modelo inválido</div>
    </div>

    <div class="p-field" [ngClass]="{ 'invalid-field': isInvalid('ano') }">
      <label for="ano">Ano</label>
      <input id="ano" type="number" pInputText formControlName="ano" />
      <div class="campo-erro" *ngIf="veiculoForm.get('ano')?.hasError('min') && veiculoForm.get('ano')?.touched">
        Ano mínimo: 1909
      </div>
      <div class="campo-erro" *ngIf="veiculoForm.get('ano')?.hasError('max') && veiculoForm.get('ano')?.touched">
        Ano máximo: 2026
      </div>
    </div>

    <div class="p-field" [ngClass]="{ 'invalid-field': isInvalid('tipo') }">
      <label for="tipo">Tipo</label>
      <input id="tipo" type="text" pInputText formControlName="tipo" />
      <div class="campo-erro" *ngIf="isInvalid('tipo')">Apenas letras são permitidas</div>
    </div>

    <div class="p-field" [ngClass]="{ 'invalid-field': isInvalid('clienteId') }">
      <label for="clienteId">Cliente</label>
      <p-dropdown
        [options]="clientes"
        optionLabel="nome"
        optionValue="id"
        formControlName="clienteId"
        placeholder="Selecione um cliente"
      ></p-dropdown>
      <div class="campo-erro" *ngIf="isInvalid('clienteId')">Seleção obrigatória</div>
    </div>

    <!-- Botões agrupados -->
    <div class="button-group">
      <button
        pButton
        type="submit"
        label="Salvar Veículo"
        class="submit-button"
      ></button>

      <button
        pButton
        type="button"
        label="Voltar para Lista"
        icon="pi pi-arrow-left"
        class="secondary-button"
        [routerLink]="['/veiculos']"
      ></button>
    </div>

  </form>
</div>
