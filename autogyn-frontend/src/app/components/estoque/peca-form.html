<!-- src/app/components/estoque/peca-form.html -->
<div class="form-container">
  <div class="form-header">
    <div class="header-content">
      <h2 class="form-title">{{ editMode ? 'Editar Peça' : 'Nova Peça' }}</h2>
      <button pButton icon="pi pi-arrow-left" label="Voltar" 
        class="back-button" (click)="voltar()"></button>
    </div>
  </div>

  <div class="form-content">
    <form [formGroup]="pecaForm" (ngSubmit)="onSubmit()" class="form-grid">
      <!-- Linha 1 - Nome e Descrição -->
      <div class="form-field">
        <label for="nome">Nome *</label>
        <input pInputText id="nome" formControlName="nome" 
               [ngClass]="{'p-invalid': pecaForm.get('nome')?.invalid && pecaForm.get('nome')?.touched}" />
        <small class="invalid-feedback" *ngIf="pecaForm.get('nome')?.invalid && pecaForm.get('nome')?.touched">
          Nome é obrigatório
        </small>
      </div>

      <div class="form-field">
        <label for="codigo">Código *</label>
        <input pInputText id="codigo" formControlName="codigo"
              [ngClass]="{'p-invalid': pecaForm.get('codigo')?.invalid && pecaForm.get('codigo')?.touched}" />
        <small class="invalid-feedback" *ngIf="pecaForm.get('codigo')?.errors?.['required'] && pecaForm.get('codigo')?.touched">
          Código é obrigatório
        </small>
        <small class="invalid-feedback" *ngIf="pecaForm.get('codigo')?.errors?.['pattern'] && pecaForm.get('codigo')?.touched">
          Código inválido. Use o formato P-0000
        </small>
      </div>
      
      <div class="form-field">
        <label for="descricao">Descrição</label>
        <textarea pInputTextarea id="descricao" formControlName="descricao" rows="2"></textarea>
      </div>
      
      <!-- Linha 2 - Quantidade e Preço Unitário -->
      <div class="form-field">
        <label for="quantidade">Quantidade *</label>
        <p-inputNumber id="quantidade" formControlName="quantidade" 
                      [ngClass]="{'p-invalid': pecaForm.get('quantidade')?.invalid && pecaForm.get('quantidade')?.touched}"
                      mode="decimal" [min]="0"></p-inputNumber>
        <small class="invalid-feedback" *ngIf="pecaForm.get('quantidade')?.invalid && pecaForm.get('quantidade')?.touched">
          Quantidade inválida
        </small>
      </div>
      
      <div class="form-field">
        <label for="valorUnitario">Preço Unitário (R$) *</label>
        <p-inputNumber id="valorUnitario" formControlName="valorUnitario" 
                      [ngClass]="{'p-invalid': pecaForm.get('valorUnitario')?.invalid && pecaForm.get('valorUnitario')?.touched}"
                      mode="currency" currency="BRL" locale="pt-BR" [min]="0"></p-inputNumber>
        <small class="invalid-feedback" *ngIf="pecaForm.get('valorUnitario')?.invalid && pecaForm.get('valorUnitario')?.touched">
          Valor inválido
        </small>
      </div>
      
      <!-- Linha 3 - Estoque Mínimo e Localização -->
      <div class="form-field">
        <label for="estoqueMinimo">Estoque Mínimo *</label>
        <p-inputNumber id="estoqueMinimo" formControlName="estoqueMinimo" 
                      [ngClass]="{'p-invalid': pecaForm.get('estoqueMinimo')?.invalid && pecaForm.get('estoqueMinimo')?.touched}"
                      mode="decimal" [min]="0"></p-inputNumber>
        <small class="invalid-feedback" *ngIf="pecaForm.get('estoqueMinimo')?.invalid && pecaForm.get('estoqueMinimo')?.touched">
          Valor inválido
        </small>
      </div>
      
      <div class="form-field">
        <label for="localizacao">Localização</label>
        <input pInputText id="localizacao" formControlName="localizacao" />
      </div>
      
      <div class="form-actions">
        <button pButton type="button" label="Cancelar" 
                class="cancel-button" routerLink="/estoque"></button>
        <button pButton type="submit" label="Salvar" 
                class="save-button" [disabled]="pecaForm.invalid"></button>
      </div>
    </form>
  </div>
</div>