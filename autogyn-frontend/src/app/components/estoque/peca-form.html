<!-- src/app/components/estoque/peca-form.html -->
<div class="form-container">
  <div class="form-header">
    <div class="header-content">
      <h2 class="form-title">{{ editMode ? 'Editar Peça' : 'Nova Peça' }}</h2>
      <button pButton icon="pi pi-arrow-left" label="Voltar" 
        class="p-button-text p-button-sm" (click)="voltar()"></button>
    </div>
  </div>

  <div class="form-content">
    <form [formGroup]="pecaForm" (ngSubmit)="onSubmit()" class="form-grid">
      
      <!-- Nome -->
      <div class="form-field full-width">
        <label for="nome">Nome *</label>
        <input pInputText id="nome" formControlName="nome" 
               [ngClass]="{'p-invalid': pecaForm.get('nome')?.invalid && pecaForm.get('nome')?.touched}" />
        <small class="invalid-feedback" *ngIf="pecaForm.get('nome')?.invalid && pecaForm.get('nome')?.touched">
          Nome é obrigatório
        </small>
      </div>

      <!-- Código -->
      <div class="form-field">
        <label for="codigo">Código *</label>
        <input pInputText id="codigo" formControlName="codigo" 
               [ngClass]="{'p-invalid': pecaForm.get('codigo')?.invalid && pecaForm.get('codigo')?.touched}" />
        <small class="invalid-feedback" *ngIf="pecaForm.get('codigo')?.hasError('pattern') && pecaForm.get('codigo')?.touched">
          Código inválido (Ex: P-1234A ou P123B)
        </small>
      </div>

      <!-- Quantidade -->
      <div class="form-field">
        <label for="quantidade">Quantidade *</label>
        <p-inputNumber id="quantidade" formControlName="quantidade"
                      [ngClass]="{'p-invalid': pecaForm.get('quantidade')?.invalid && pecaForm.get('quantidade')?.touched}"
                      mode="decimal" [min]="0"></p-inputNumber>
        <small class="invalid-feedback" *ngIf="pecaForm.get('quantidade')?.invalid && pecaForm.get('quantidade')?.touched">
          Quantidade inválida
        </small>
      </div>

      <!-- Valor Unitário -->
      <div class="form-field">
        <label for="valorUnitario">Valor Unitário (R$) *</label>
        <p-inputNumber id="valorUnitario" formControlName="valorUnitario"
                      [ngClass]="{'p-invalid': pecaForm.get('valorUnitario')?.invalid && pecaForm.get('valorUnitario')?.touched}"
                      mode="currency" currency="BRL" locale="pt-BR" [min]="0"></p-inputNumber>
        <small class="invalid-feedback" *ngIf="pecaForm.get('valorUnitario')?.invalid && pecaForm.get('valorUnitario')?.touched">
          Valor inválido
        </small>
      </div>

      <!-- Estoque Mínimo -->
      <div class="form-field">
        <label for="estoqueMinimo">Estoque Mínimo</label>
        <p-inputNumber id="estoqueMinimo" formControlName="estoqueMinimo"
                      mode="decimal" [min]="0"></p-inputNumber>
      </div>

      <!-- Descrição -->
      <div class="form-field full-width">
        <label for="descricao">Descrição</label>
        <textarea pInputTextarea id="descricao" formControlName="descricao" rows="3"></textarea>
      </div>

      <!-- Ações -->
      <div class="form-actions full-width">
        <button pButton type="button" label="Cancelar"
                class="p-button-secondary p-button-outlined" routerLink="/estoque"></button>
        <button pButton type="submit" label="Salvar"
                class="p-button-success" [disabled]="pecaForm.invalid"></button>
      </div>

    </form>
  </div>
</div>
